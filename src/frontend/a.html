<body>
    <div id="root"></div>
</body>
<script src="js/h.js"></script>
<script>
    const initialState = {
        tick: 0,
        tock: 0
    };

    const store = new Store(initialState, function(state, action, payload) {
        switch (action) {
            case 'TICK':
                return Object.assign({}, state, { tick: payload });
            case 'TOCK':
                return Object.assign({}, state, { tock: payload });
            default:
                return state;
        }
    });

    const Tick = store.connect(function Tick(props) {
        return h('div', {
            onMousedown: function (e) {
                store.dispatch('TICK', ++props.tick);
            }
        }, 'It is ' + props.tick);
    }, function (state) {
        return { tick: state.tick };
    });

    const Tock = store.connect(function Tock(props) {
        return h('div', {
            onMousedown: function (e) {
                store.dispatch('TOCK', ++props.tock);
            }
        }, 'It was ' + props.tock);
    }, function (state) {
        return { tock: state.tock };
    });

    const App = store.createComponent(function App(props) {
        return h('div', null, [
            props.name,
            H(Tick),
            H(Tock)
        ]);
    });

    const app = store.mount(document.getElementById('root'), function (state) {
        return H(App, {
            name: 'MyApp'
        });
    });

</script>